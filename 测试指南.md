# 食品添加剂管理系统 - 测试指南

## 📋 测试准备

### 1. 环境要求
- JDK 1.8+
- MySQL 8.0+
- Node.js 14+
- Maven 3.6+

### 2. 数据库准备
```bash
# 1. 创建数据库
mysql -u root -p
CREATE DATABASE food_additive_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# 2. 导入数据
USE food_additive_db;
SOURCE database/complete-schema.sql;
```

### 3. 启动系统

#### 方式一：使用批处理文件（Windows）
```bash
# 启动所有服务
启动全部服务.bat

# 或分别启动
启动用户端后端.bat
启动管理端后端.bat
启动用户端前端.bat
启动管理端前端.bat
```

#### 方式二：手动启动

**后端启动：**
```bash
# 用户端后端（端口8081）
cd user-backend
mvn spring-boot:run

# 管理端后端（端口8082）
cd admin-backend
mvn spring-boot:run
```

**前端启动：**
```bash
# 用户端前端（端口8080）
cd user-frontend
npm install
npm run serve

# 管理端前端（端口8083）
cd admin-frontend
npm install
npm run serve
```

---

## 🧪 功能测试清单

### 一、用户端测试（http://localhost:8080）

#### 1. 登录功能测试
**测试账号：**
- 管理员：admin / 123456
- 普通用户：user1 / 123456

**测试步骤：**
1. 打开 http://localhost:8080
2. 输入用户名和密码
3. 点击登录按钮
4. 验证是否跳转到首页

**预期结果：**
- ✅ 登录成功，跳转到首页
- ✅ 显示用户名和角色
- ✅ Token保存到localStorage

#### 2. 首页功能测试
**测试步骤：**
1. 登录后查看首页
2. 检查统计卡片数据
3. 点击快捷操作按钮

**预期结果：**
- ✅ 显示4个统计卡片（添加剂总数、库存总量、待审核记录、预警信息）
- ✅ 快捷操作可正常跳转

#### 3. 添加剂查询测试
**测试步骤：**
1. 点击左侧菜单"添加剂查询"
2. 输入搜索条件（名称、分类、安全等级）
3. 点击查询按钮
4. 点击"查看详情"按钮

**预期结果：**
- ✅ 显示添加剂列表
- ✅ 搜索功能正常
- ✅ 详情对话框显示完整信息
- ✅ 分页功能正常

#### 4. 库存查询测试
**测试步骤：**
1. 点击"库存查询"菜单
2. 查看库存列表
3. 测试搜索功能
4. 查看预警状态

**预期结果：**
- ✅ 显示库存列表
- ✅ 库存不足显示红色预警
- ✅ 库存充足显示绿色标签
- ✅ 搜索和分页正常

#### 5. 使用登记测试
**测试步骤：**
1. 点击"使用登记"菜单
2. 点击"新增登记"按钮
3. 填写使用信息
4. 提交表单
5. 查看历史记录

**预期结果：**
- ✅ 表单验证正常
- ✅ 提交成功
- ✅ 历史记录显示
- ✅ 审核状态显示

#### 6. 检测报告查看测试
**测试步骤：**
1. 点击"检测报告"菜单
2. 查看报告列表
3. 点击"查看详情"
4. 测试搜索功能

**预期结果：**
- ✅ 显示报告列表
- ✅ 详情对话框显示完整信息
- ✅ 检测结果标签显示正确
- ✅ 搜索功能正常

#### 7. 预警信息测试
**测试步骤：**
1. 点击"预警信息"菜单
2. 查看预警统计卡片
3. 查看预警列表
4. 测试筛选功能

**预期结果：**
- ✅ 统计卡片显示正确
- ✅ 预警列表按级别显示
- ✅ 不同级别显示不同颜色
- ✅ 筛选功能正常

#### 8. 个人中心测试 ✨
**测试步骤：**
1. 点击右上角用户名下拉菜单
2. 点击"个人信息"
3. 编辑个人信息（真实姓名、电话、邮箱、部门）
4. 点击保存
5. 修改密码
6. 提交新密码

**预期结果：**
- ✅ 个人信息卡片显示正确
- ✅ 编辑表单验证正常
- ✅ 保存成功，信息更新
- ✅ 密码修改成功后自动退出登录

---

### 二、管理端测试（http://localhost:8083）

#### 1. 登录功能测试
**测试账号：**
- 管理员：admin / 123456

**测试步骤：**
1. 打开 http://localhost:8083
2. 输入管理员账号密码
3. 点击登录

**预期结果：**
- ✅ 登录成功，跳转到仪表盘

#### 2. 仪表盘测试
**测试步骤：**
1. 查看数据统计卡片
2. 查看图表展示

**预期结果：**
- ✅ 显示各类统计数据
- ✅ 图表正常显示

#### 3. 添加剂管理测试
**测试步骤：**
1. 点击"添加剂列表"菜单
2. 点击"新增添加剂"
3. 填写表单并提交
4. 编辑添加剂
5. 删除添加剂

**预期结果：**
- ✅ 新增成功
- ✅ 编辑成功
- ✅ 删除需确认
- ✅ 搜索和分页正常

#### 4. 分类管理测试
**测试步骤：**
1. 点击"分类管理"菜单
2. 新增分类
3. 编辑分类
4. 删除分类

**预期结果：**
- ✅ CRUD操作正常
- ✅ 表单验证正常

#### 5. 库存管理测试
**测试步骤：**
1. 点击"库存列表"菜单
2. 查看库存信息
3. 编辑库存数量
4. 查看预警状态

**预期结果：**
- ✅ 库存列表显示正常
- ✅ 编辑功能正常
- ✅ 预警标签显示正确

#### 6. 供应商管理测试
**测试步骤：**
1. 点击"供应商列表"菜单
2. 新增供应商
3. 编辑供应商
4. 删除供应商

**预期结果：**
- ✅ CRUD操作正常
- ✅ 评级显示正确

#### 7. 采购记录测试
**测试步骤：**
1. 点击"采购记录"菜单
2. 新增采购记录
3. 查看详情
4. 搜索和筛选

**预期结果：**
- ✅ 新增成功
- ✅ 详情显示完整
- ✅ 搜索功能正常

#### 8. 使用记录审核测试 ✨
**测试步骤：**
1. 点击"使用记录"菜单
2. 查看待审核记录
3. 点击"通过"按钮
4. 填写审核意见
5. 提交审核
6. 测试"拒绝"功能

**预期结果：**
- ✅ 待审核记录显示黄色标签
- ✅ 审核对话框正常
- ✅ 通过后状态变为绿色
- ✅ 拒绝后状态变为红色
- ✅ 审核意见保存成功

#### 9. 检测报告管理测试 ✨
**测试步骤：**
1. 点击"检测报告"菜单
2. 点击"新增报告"
3. 选择添加剂（支持搜索）
4. 填写报告信息
5. 提交表单
6. 查看详情
7. 测试下载功能

**预期结果：**
- ✅ 添加剂下拉列表支持搜索
- ✅ 表单验证正常
- ✅ 新增成功
- ✅ 详情对话框显示完整信息
- ✅ 下载功能提示（预留接口）

#### 10. 操作日志测试 ✨
**测试步骤：**
1. 点击"操作日志"菜单
2. 测试搜索筛选
   - 按操作人搜索
   - 按操作类型筛选
   - 按模块名称筛选
   - 按时间范围筛选
3. 点击"查看详情"
4. 点击"导出"按钮

**预期结果：**
- ✅ 日志列表显示正常
- ✅ 多条件筛选正常
- ✅ 详情显示完整（包含请求参数）
- ✅ 导出为Excel文件成功

#### 11. 用户管理测试 ✨
**测试步骤：**
1. 点击"用户管理"菜单
2. 点击"新增用户"
3. 填写用户信息
4. 提交表单
5. 编辑用户
6. 点击"重置密码"
7. 删除用户

**预期结果：**
- ✅ 新增用户成功
- ✅ 角色选择正常（管理员/普通用户）
- ✅ 编辑功能正常
- ✅ 重置密码成功（重置为123456）
- ✅ 删除需确认
- ✅ 用户状态切换正常

---

## 📸 测试截图建议

### 必须截图的功能点：
1. 用户端登录页面
2. 用户端首页（统计卡片）
3. 添加剂查询页面
4. 个人中心页面 ✨
5. 管理端登录页面
6. 管理端仪表盘
7. 添加剂管理页面
8. 使用记录审核页面 ✨
9. 检测报告管理页面 ✨
10. 操作日志页面（筛选和导出）✨
11. 用户管理页面 ✨
12. 数据库表关联关系图

---

## 🐛 常见问题

### 1. 后端启动失败
**问题：** 端口被占用
**解决：** 
```bash
# 查看端口占用
netstat -ano | findstr "8081"
netstat -ano | findstr "8082"

# 结束进程
taskkill /PID <进程ID> /F
```

### 2. 前端启动失败
**问题：** 依赖安装失败
**解决：**
```bash
# 清除缓存
npm cache clean --force

# 重新安装
rm -rf node_modules package-lock.json
npm install
```

### 3. 数据库连接失败
**问题：** 连接被拒绝
**解决：**
- 检查MySQL服务是否启动
- 检查application.yml中的数据库配置
- 确认数据库用户名密码正确

### 4. 跨域问题
**问题：** CORS错误
**解决：**
- 后端已配置CORS，允许所有来源
- 检查前端请求地址是否正确

---

## ✅ 测试通过标准

### 功能测试
- [ ] 所有页面可正常访问
- [ ] 所有表单验证正常
- [ ] 所有CRUD操作成功
- [ ] 搜索和筛选功能正常
- [ ] 分页功能正常
- [ ] 对话框显示正常

### 性能测试
- [ ] 页面加载时间 < 3秒
- [ ] API响应时间 < 1秒
- [ ] 无明显卡顿

### 兼容性测试
- [ ] Chrome浏览器正常
- [ ] Edge浏览器正常
- [ ] Firefox浏览器正常

---

**测试完成后，请将测试结果和截图整理到实验报告中。**

