# 食品添加剂管理系统 - 快速开始指南

## 📋 项目说明

本系统包含4个独立项目：
1. **user-backend** - 用户端后端 (SpringBoot, 端口8081)
2. **admin-backend** - 管理端后端 (SpringBoot, 端口8082)
3. **user-frontend** - 用户端前端 (Vue, 端口8080)
4. **admin-frontend** - 管理端前端 (Vue, 端口8083)

## 🚀 快速启动步骤

### 第一步：环境准备

确保已安装以下软件：
- ✅ JDK 1.8+
- ✅ Maven 3.6+
- ✅ Node.js 14+
- ✅ MySQL 8.0+
- ✅ IDEA (推荐) 或 Eclipse
- ✅ VSCode (前端开发)

### 第二步：数据库初始化

```bash
# 1. 登录MySQL
mysql -u root -p

# 2. 导入数据库脚本
source E:/桌面/食品/food-additive-system/database/schema.sql

# 或者直接执行
mysql -u root -p < database/schema.sql
```

验证数据库：
```sql
USE food_additive_system;
SHOW TABLES;  -- 应该看到10个表
SELECT * FROM sys_user;  -- 应该看到3个用户
```

### 第三步：后端代码生成

#### 方式一：使用提供的代码生成器（推荐）

1. 打开IDEA，导入 `user-backend` 项目
2. 将 `docs/CodeGenerator.java` 复制到项目中
3. 修改数据库连接信息（如果需要）
4. 运行 `CodeGenerator.main()` 方法
5. 代码将自动生成到对应目录

重复以上步骤为 `admin-backend` 生成代码

#### 方式二：使用IDEA插件

1. 安装插件：MyBatisX
2. 在IDEA中连接数据库
3. 右键表名 -> MyBatisX-Generator
4. 选择生成路径和模板
5. 生成Entity、Mapper、Service、Controller

### 第四步：完善后端代码

#### 1. 复制公共类

将以下文件复制到两个后端项目：

**用户端 (user-backend):**
```
src/main/java/com/foodadditive/user/
├── common/
│   ├── Result.java          ✅ 已创建
│   ├── Constants.java       ⚠️ 需要创建
│   └── PageResult.java      ⚠️ 需要创建
├── config/
│   ├── CorsConfig.java      ⚠️ 需要创建
│   ├── MyBatisPlusConfig.java  ⚠️ 需要创建
│   └── WebConfig.java       ⚠️ 需要创建
├── interceptor/
│   └── JwtInterceptor.java  ⚠️ 需要创建
├── aspect/
│   └── LogAspect.java       ⚠️ 需要创建
└── util/
    ├── JwtUtil.java         ⚠️ 需要创建
    └── PasswordUtil.java    ⚠️ 需要创建
```

**管理端 (admin-backend):**
同样的结构，只是包名改为 `com.foodadditive.admin`

#### 2. 创建必要的配置类

参考 `docs/开发指南.md` 中的示例代码

### 第五步：启动后端服务

#### 启动用户端后端

```bash
cd user-backend
mvn clean install
mvn spring-boot:run
```

或在IDEA中直接运行 `UserBackendApplication.java`

访问测试：
- 后端API: http://localhost:8081/api/user
- Druid监控: http://localhost:8081/api/user/druid (admin/admin)

#### 启动管理端后端

```bash
cd admin-backend
mvn clean install
mvn spring-boot:run
```

或在IDEA中直接运行 `AdminBackendApplication.java`

访问测试：
- 后端API: http://localhost:8082/api/admin
- Druid监控: http://localhost:8082/api/admin/druid (admin/admin)

### 第六步：初始化前端项目

#### 用户端前端

```bash
cd user-frontend

# 创建Vue项目
vue create .
# 选择: Manually select features
# 勾选: Babel, Router, Vuex, CSS Pre-processors
# Vue version: 2.x
# CSS Pre-processor: Sass/SCSS

# 安装依赖
npm install element-ui axios js-cookie --save

# 启动开发服务器
npm run serve
```

访问: http://localhost:8080

#### 管理端前端

```bash
cd admin-frontend

# 创建Vue项目
vue create .
# 选择: Manually select features
# 勾选: Babel, Router, Vuex, CSS Pre-processors
# Vue version: 2.x
# CSS Pre-processor: Sass/SCSS

# 安装依赖
npm install element-ui axios js-cookie --save

# 启动开发服务器
npm run serve
```

访问: http://localhost:8083

### 第七步：前端代码开发

参考 `docs/开发指南.md` 中的前端开发部分

关键文件：
1. `src/utils/request.js` - Axios配置
2. `src/router/index.js` - 路由配置
3. `src/store/index.js` - Vuex配置
4. `src/api/*.js` - API接口定义
5. `src/views/*.vue` - 页面组件

## 📝 默认账号

### 管理员
- 用户名: `admin`
- 密码: `123456`
- 角色: ADMIN

### 普通用户
- 用户名: `user1` 或 `user2`
- 密码: `123456`
- 角色: USER

## 🔧 常见问题

### 1. 数据库连接失败

检查 `application.yml` 中的数据库配置：
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/food_additive_system
    username: root
    password: your_password  # 修改为你的密码
```

### 2. 端口被占用

修改 `application.yml` 中的端口：
```yaml
server:
  port: 8081  # 改为其他端口
```

### 3. Maven依赖下载慢

配置Maven镜像（阿里云）：
```xml
<mirror>
  <id>aliyun</id>
  <mirrorOf>central</mirrorOf>
  <url>https://maven.aliyun.com/repository/public</url>
</mirror>
```

### 4. 前端跨域问题

后端已配置CORS，如果仍有问题，检查 `CorsConfig.java`

### 5. JWT认证失败

检查：
1. 前端是否正确存储token
2. 请求头是否携带 `Authorization: Bearer {token}`
3. token是否过期

## 📚 下一步

1. ✅ 完成后端代码生成
2. ✅ 完成公共类开发
3. ✅ 完成业务逻辑开发
4. ✅ 完成前端页面开发
5. ✅ 前后端联调测试
6. ✅ 编写测试用例
7. ✅ 系统部署
8. ✅ 编写实验报告

## 📖 参考文档

- [开发指南](docs/开发指南.md)
- [数据库设计](database/schema.sql)
- [代码生成器](docs/CodeGenerator.java)
- [README](README.md)

## 💡 提示

1. 建议先完成一个模块的完整功能（前后端），再复制到其他模块
2. 使用Postman测试后端API
3. 使用Vue DevTools调试前端
4. 及时提交代码到Git
5. 遇到问题先查看日志

## 📞 技术支持

如有问题，请查看：
1. 控制台日志
2. 浏览器开发者工具
3. 数据库日志
4. 项目文档

祝开发顺利！🎉

