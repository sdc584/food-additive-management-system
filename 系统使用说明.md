# 食品添加剂管理系统 - 使用说明

## 📋 系统概述

食品添加剂管理系统是一个基于 **Java + Vue + Spring Boot** 的全栈Web应用，用于管理食品添加剂的采购、库存、使用、检测等全流程业务。

### 系统架构

```
用户端                          管理端
┌──────────────┐              ┌──────────────┐
│ Vue前端       │              │ Vue前端       │
│ :8080        │              │ :8083        │
└──────┬───────┘              └──────┬───────┘
       │                             │
       ▼                             ▼
┌──────────────┐              ┌──────────────┐
│ SpringBoot   │              │ SpringBoot   │
│ :8081        │              │ :8082        │
└──────┬───────┘              └──────┬───────┘
       │                             │
       └─────────────┬───────────────┘
                     ▼
            ┌─────────────────┐
            │  MySQL 数据库    │
            │  10张关联表      │
            └─────────────────┘
```

## 🚀 快速启动

### 方法一：一键启动（推荐）

双击运行 `启动全部服务.bat`，系统会自动启动所有4个服务。

### 方法二：分别启动

1. **启动后端服务**
   - 双击 `启动用户端后端.bat`
   - 双击 `启动管理端后端.bat`

2. **启动前端服务**
   - 双击 `启动用户端前端.bat`
   - 双击 `启动管理端前端.bat`

### 方法三：命令行启动

```bash
# 用户端后端
cd user-backend
mvn spring-boot:run

# 管理端后端
cd admin-backend
mvn spring-boot:run

# 用户端前端
cd user-frontend
npm run dev

# 管理端前端
cd admin-frontend
npm run dev
```

## 🌐 访问地址

| 服务 | 地址 | 说明 |
|------|------|------|
| 用户端前端 | http://localhost:8080 | 普通用户使用界面 |
| 管理端前端 | http://localhost:8083 | 管理员使用界面 |
| 用户端后端 | http://localhost:8081/api/user | 用户端API接口 |
| 管理端后端 | http://localhost:8082/api/admin | 管理端API接口 |
| API测试页面 | test-api.html | 接口测试工具 |
| Druid监控(用户) | http://localhost:8081/api/user/druid | 数据库连接池监控 |
| Druid监控(管理) | http://localhost:8082/api/admin/druid | 数据库连接池监控 |

## 🔑 默认账号

- **用户名**: `admin`
- **密码**: `123456`
- **角色**: ADMIN（管理员）

其他测试账号：
- `user1` / `123456` (普通用户)
- `user2` / `123456` (普通用户)

## 📊 系统模块

系统包含 **10个核心模块**，所有数据表都通过外键关联，无孤立表：

### 1. 用户管理模块 (sys_user)
- 用户注册、登录、权限管理
- 支持ADMIN和USER两种角色

### 2. 添加剂分类模块 (additive_category)
- 添加剂分类的增删改查
- 分类层级管理

### 3. 食品添加剂模块 (food_additive)
- 添加剂信息管理
- 关联分类信息
- 包含名称、编号、用途、限量等信息

### 4. 供应商管理模块 (supplier)
- 供应商信息维护
- 联系人、电话、地址等

### 5. 采购记录模块 (purchase_record)
- 采购单管理
- 关联供应商和添加剂
- 记录采购数量、价格、日期

### 6. 库存管理模块 (inventory)
- 实时库存查询
- 库存预警
- 关联添加剂信息

### 7. 使用记录模块 (usage_record)
- 添加剂使用登记
- 自动扣减库存
- 使用目的、数量记录

### 8. 检测报告模块 (test_report)
- 质检报告管理
- 关联添加剂
- 检测结果、检测人、检测日期

### 9. 预警管理模块 (warning)
- 库存预警
- 过期预警
- 自动生成预警信息

### 10. 操作日志模块 (operation_log)
- 系统操作记录
- 用户行为追踪
- 审计日志

## 🗄️ 数据库信息

- **数据库名**: `food_additive_system`
- **字符集**: utf8mb4
- **排序规则**: utf8mb4_unicode_ci
- **表数量**: 10张
- **外键约束**: 12个
- **初始数据**: 45条记录

### 数据库初始化

数据库已自动初始化，如需重新初始化：

```bash
mysql -u root -psdc1534260.0 < database/complete-schema.sql
```

## 🛠️ 技术栈

### 后端技术
- **框架**: Spring Boot 2.7.18
- **ORM**: MyBatis Plus 3.5.3.1
- **数据库**: MySQL 8.0
- **连接池**: Druid 1.2.20
- **认证**: JWT
- **密码加密**: BCrypt

### 前端技术
- **框架**: Vue 2.6.14
- **UI组件**: Element UI 2.15.14
- **状态管理**: Vuex 3.6.2
- **路由**: Vue Router 3.5.1
- **HTTP客户端**: Axios 1.6.0
- **图表**: ECharts 5.4.3 (管理端)

## 📁 项目结构

```
food-additive-system/
├── user-backend/          # 用户端后端
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/
│   │   │   │   └── com/foodadditive/user/
│   │   │   │       ├── controller/    # 控制器
│   │   │   │       ├── service/       # 服务层
│   │   │   │       ├── mapper/        # 数据访问层
│   │   │   │       ├── entity/        # 实体类
│   │   │   │       ├── common/        # 公共类
│   │   │   │       └── config/        # 配置类
│   │   │   └── resources/
│   │   │       ├── application.yml    # 配置文件
│   │   │       └── mapper/            # MyBatis映射文件
│   │   └── test/
│   └── pom.xml
│
├── admin-backend/         # 管理端后端（结构同上）
│
├── user-frontend/         # 用户端前端
│   ├── public/
│   ├── src/
│   │   ├── api/          # API接口
│   │   ├── assets/       # 静态资源
│   │   ├── components/   # 组件
│   │   ├── router/       # 路由
│   │   ├── store/        # 状态管理
│   │   ├── utils/        # 工具类
│   │   ├── views/        # 页面
│   │   ├── App.vue       # 根组件
│   │   └── main.js       # 入口文件
│   ├── package.json
│   └── vue.config.js
│
├── admin-frontend/        # 管理端前端（结构同上）
│
├── database/              # 数据库脚本
│   ├── complete-schema.sql           # 完整数据库脚本
│   └── 数据库关联关系说明.md          # 数据库文档
│
├── docs/                  # 文档
│
├── 启动全部服务.bat        # 一键启动脚本
├── 启动用户端后端.bat
├── 启动管理端后端.bat
├── 启动用户端前端.bat
├── 启动管理端前端.bat
├── 检查系统状态.bat        # 状态检查脚本
├── test-api.html          # API测试页面
└── 系统使用说明.md         # 本文件
```

## 🔧 开发指南

### 后端开发

1. **添加新的Controller**
   ```java
   @RestController
   @RequestMapping("/yourModule")
   public class YourController {
       @Autowired
       private YourService yourService;
       
       @GetMapping
       public Result<List<YourEntity>> list() {
           return Result.success(yourService.list());
       }
   }
   ```

2. **添加新的Service**
   ```java
   @Service
   public class YourServiceImpl extends ServiceImpl<YourMapper, YourEntity> 
           implements YourService {
       // 业务逻辑
   }
   ```

### 前端开发

1. **添加新页面**
   - 在 `src/views/` 创建 `.vue` 文件
   - 在 `src/router/index.js` 添加路由

2. **调用API**
   ```javascript
   import axios from 'axios'
   
   axios.get('/api/user/yourModule')
     .then(response => {
       console.log(response.data)
     })
   ```

## 🧪 测试

### API测试

1. 打开 `test-api.html` 文件
2. 点击相应按钮测试接口
3. 查看返回结果

### 功能测试

1. 登录系统
2. 测试各模块的增删改查功能
3. 验证数据关联关系

## 📝 注意事项

1. **端口占用**: 确保 8080、8081、8082、8083 端口未被占用
2. **数据库连接**: 确保MySQL服务已启动，密码为 `sdc1534260.0`
3. **Node.js版本**: 建议使用 Node.js 14+ 版本
4. **Maven配置**: 确保Maven已正确配置
5. **字符编码**: 所有文件使用UTF-8编码

## 🐛 常见问题

### 1. 后端启动失败
- 检查MySQL是否启动
- 检查数据库密码是否正确
- 检查端口是否被占用

### 2. 前端启动失败
- 运行 `npm install` 重新安装依赖
- 检查Node.js版本
- 清除缓存: `npm cache clean --force`

### 3. 接口调用失败
- 检查后端是否启动成功
- 查看浏览器控制台错误信息
- 检查跨域配置

### 4. 数据库连接失败
- 确认MySQL服务运行中
- 检查用户名密码
- 验证数据库是否存在

## 📞 技术支持

如遇到问题，请检查：
1. 系统日志（后端控制台输出）
2. 浏览器控制台（前端错误信息）
3. 数据库连接状态
4. 端口占用情况

## 📄 许可证

本项目仅用于课程设计学习使用。

---

**最后更新**: 2025-10-31
**版本**: 1.0.0

