# é£Ÿå“æ·»åŠ å‰‚ç®¡ç†ç³»ç»Ÿ - æ•°æ®åº“å…³è”å…³ç³»è¯´æ˜

## âœ… æ•°æ®åº“åˆ›å»ºæˆåŠŸ

- **æ•°æ®åº“åç§°ï¼š** food_additive_system
- **å­—ç¬¦é›†ï¼š** utf8mb4
- **æ’åºè§„åˆ™ï¼š** utf8mb4_unicode_ci
- **è¡¨æ•°é‡ï¼š** 10ä¸ª
- **å¤–é”®æ•°é‡ï¼š** 12ä¸ª
- **æ‰€æœ‰è¡¨éƒ½æœ‰å…³è”ï¼Œæ— å­¤è¡¨** âœ…

## ğŸ“Š æ•°æ®ç»Ÿè®¡

| è¡¨å | è®°å½•æ•° | è¯´æ˜ |
|------|--------|------|
| sys_user (ç”¨æˆ·è¡¨) | 3 | 1ä¸ªç®¡ç†å‘˜ + 2ä¸ªæ™®é€šç”¨æˆ· |
| additive_category (åˆ†ç±»è¡¨) | 6 | 6ä¸ªæ·»åŠ å‰‚åˆ†ç±» |
| food_additive (æ·»åŠ å‰‚è¡¨) | 7 | 7ç§é£Ÿå“æ·»åŠ å‰‚ |
| supplier (ä¾›åº”å•†è¡¨) | 3 | 3ä¸ªä¾›åº”å•† |
| purchase_record (é‡‡è´­è®°å½•è¡¨) | 5 | 5æ¡é‡‡è´­è®°å½• |
| inventory (åº“å­˜è¡¨) | 7 | 7æ¡åº“å­˜è®°å½• |
| usage_record (ä½¿ç”¨è®°å½•è¡¨) | 5 | 5æ¡ä½¿ç”¨è®°å½• |
| test_report (æ£€æµ‹æŠ¥å‘Šè¡¨) | 3 | 3ä»½æ£€æµ‹æŠ¥å‘Š |
| warning (é¢„è­¦è¡¨) | 2 | 2æ¡é¢„è­¦ä¿¡æ¯ |
| operation_log (æ“ä½œæ—¥å¿—è¡¨) | 4 | 4æ¡æ“ä½œæ—¥å¿— |

## ğŸ”— è¡¨å…³è”å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     é£Ÿå“æ·»åŠ å‰‚ç®¡ç†ç³»ç»Ÿè¡¨å…³è”å›¾                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  sys_user    â”‚ (ç”¨æˆ·è¡¨)
                    â”‚  user_id(PK) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚              â”‚
           â–¼               â–¼               â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚operation â”‚   â”‚purchase_recordâ”‚  â”‚usage_    â”‚  â”‚warning   â”‚
    â”‚_log      â”‚   â”‚purchaser_id   â”‚  â”‚record    â”‚  â”‚handler_idâ”‚
    â”‚user_id   â”‚   â”‚(FK)           â”‚  â”‚user_id   â”‚  â”‚(FK)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                           â”‚               â”‚             â”‚
                           â”‚               â”‚             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                      â”‚               â”‚
    â”‚                      â–¼               â”‚
    â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
    â”‚              â”‚food_additive â”‚        â”‚
    â”‚              â”‚additive_id   â”‚        â”‚
    â”‚              â”‚(PK)          â”‚        â”‚
    â”‚              â”‚category_id   â”‚        â”‚
    â”‚              â”‚(FK)          â”‚        â”‚
    â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
    â”‚                     â”‚                â”‚
    â”‚                     â”‚                â”‚
    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      â”‚              â”‚                â”‚          â”‚
    â”‚      â–¼              â–¼                â–¼          â–¼
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â”‚test_   â”‚   â”‚inventory â”‚    â”‚purchase_ â”‚ â”‚usage_    â”‚
    â”‚  â”‚report  â”‚   â”‚additive_ â”‚    â”‚record    â”‚ â”‚record    â”‚
    â”‚  â”‚additiveâ”‚   â”‚id(FK)    â”‚    â”‚additive_ â”‚ â”‚additive_ â”‚
    â”‚  â”‚_id(FK) â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â”‚id(FK)    â”‚ â”‚id(FK)    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â”‚               â”‚
    â”‚                    â”‚               â”‚
    â”‚                    â–¼               â–¼
    â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚warning   â”‚    â”‚supplier  â”‚
    â”‚              â”‚inventory â”‚    â”‚supplier_ â”‚
    â”‚              â”‚_id(FK)   â”‚    â”‚id(PK)    â”‚
    â”‚              â”‚additive_ â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚              â”‚id(FK)    â”‚         â”‚
    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
    â”‚                                   â”‚
    â”‚                                   â–¼
    â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                            â”‚purchase_     â”‚
    â”‚                            â”‚record        â”‚
    â”‚                            â”‚supplier_id   â”‚
    â”‚                            â”‚(FK)          â”‚
    â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚additive_category â”‚
â”‚category_id(PK)   â”‚
â”‚parent_id(è‡ªå…³è”) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ è¯¦ç»†å¤–é”®å…³ç³»

### 1. sys_user (ç”¨æˆ·è¡¨) - æ ¸å¿ƒè¡¨
**è¢«å¼•ç”¨æ¬¡æ•°ï¼š4æ¬¡**

| å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|--------|--------|------|
| operation_log | user_id | è®°å½•ç”¨æˆ·æ“ä½œæ—¥å¿— |
| purchase_record | purchaser_id | è®°å½•é‡‡è´­å‘˜ä¿¡æ¯ |
| usage_record | user_id | è®°å½•ä½¿ç”¨æ“ä½œå‘˜ |
| warning | handler_id | è®°å½•é¢„è­¦å¤„ç†äºº |

### 2. additive_category (åˆ†ç±»è¡¨)
**è¢«å¼•ç”¨æ¬¡æ•°ï¼š1æ¬¡**

| å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|--------|--------|------|
| food_additive | category_id | æ·»åŠ å‰‚æ‰€å±åˆ†ç±» |

**è‡ªå…³è”ï¼š** parent_id â†’ category_id (æ”¯æŒå¤šçº§åˆ†ç±»)

### 3. food_additive (æ·»åŠ å‰‚ä¿¡æ¯è¡¨) - æ ¸å¿ƒè¡¨
**è¢«å¼•ç”¨æ¬¡æ•°ï¼š6æ¬¡**

| å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|--------|--------|------|
| inventory | additive_id | åº“å­˜å¯¹åº”çš„æ·»åŠ å‰‚ |
| purchase_record | additive_id | é‡‡è´­çš„æ·»åŠ å‰‚ |
| usage_record | additive_id | ä½¿ç”¨çš„æ·»åŠ å‰‚ |
| test_report | additive_id | æ£€æµ‹çš„æ·»åŠ å‰‚ |
| warning | additive_id | é¢„è­¦çš„æ·»åŠ å‰‚ |

**å¼•ç”¨è¡¨ï¼š**
| è¢«å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|----------|--------|------|
| additive_category | category_id | æ‰€å±åˆ†ç±» |

### 4. supplier (ä¾›åº”å•†è¡¨)
**è¢«å¼•ç”¨æ¬¡æ•°ï¼š1æ¬¡**

| å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|--------|--------|------|
| purchase_record | supplier_id | é‡‡è´­çš„ä¾›åº”å•† |

### 5. inventory (åº“å­˜è¡¨)
**è¢«å¼•ç”¨æ¬¡æ•°ï¼š1æ¬¡**

| å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|--------|--------|------|
| warning | inventory_id | åº“å­˜é¢„è­¦ |

**å¼•ç”¨è¡¨ï¼š**
| è¢«å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|----------|--------|------|
| food_additive | additive_id | åº“å­˜å¯¹åº”çš„æ·»åŠ å‰‚ |

### 6. purchase_record (é‡‡è´­è®°å½•è¡¨)
**å¼•ç”¨è¡¨ï¼š3ä¸ª**

| è¢«å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|----------|--------|------|
| food_additive | additive_id | é‡‡è´­çš„æ·»åŠ å‰‚ |
| supplier | supplier_id | ä¾›åº”å•† |
| sys_user | purchaser_id | é‡‡è´­å‘˜ |

### 7. usage_record (ä½¿ç”¨è®°å½•è¡¨)
**å¼•ç”¨è¡¨ï¼š2ä¸ª**

| è¢«å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|----------|--------|------|
| food_additive | additive_id | ä½¿ç”¨çš„æ·»åŠ å‰‚ |
| sys_user | user_id | æ“ä½œå‘˜ |

### 8. test_report (æ£€æµ‹æŠ¥å‘Šè¡¨)
**å¼•ç”¨è¡¨ï¼š1ä¸ª**

| è¢«å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|----------|--------|------|
| food_additive | additive_id | æ£€æµ‹çš„æ·»åŠ å‰‚ |

### 9. warning (é¢„è­¦è¡¨)
**å¼•ç”¨è¡¨ï¼š3ä¸ª**

| è¢«å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|----------|--------|------|
| food_additive | additive_id | é¢„è­¦çš„æ·»åŠ å‰‚ |
| inventory | inventory_id | é¢„è­¦çš„åº“å­˜ |
| sys_user | handler_id | å¤„ç†äºº |

### 10. operation_log (æ“ä½œæ—¥å¿—è¡¨)
**å¼•ç”¨è¡¨ï¼š1ä¸ª**

| è¢«å¼•ç”¨è¡¨ | å¤–é”®åˆ— | è¯´æ˜ |
|----------|--------|------|
| sys_user | user_id | æ“ä½œç”¨æˆ· |

## âœ… æ»¡è¶³è¯¾ç¨‹è¦æ±‚éªŒè¯

### è¦æ±‚1ï¼šæ¨¡å—æ•°é‡è¶…è¿‡8ä¸ª
- âœ… **å®é™…ï¼š10ä¸ªæ¨¡å—**
- ç”¨æˆ·ç®¡ç†ã€åˆ†ç±»ç®¡ç†ã€æ·»åŠ å‰‚ç®¡ç†ã€ä¾›åº”å•†ç®¡ç†ã€é‡‡è´­ç®¡ç†ã€åº“å­˜ç®¡ç†ã€ä½¿ç”¨è®°å½•ç®¡ç†ã€æ£€æµ‹æŠ¥å‘Šç®¡ç†ã€é¢„è­¦ç®¡ç†ã€æ“ä½œæ—¥å¿—

### è¦æ±‚2ï¼šæ‰€æœ‰è¡¨å¿…é¡»ä¸å¦ä¸€ä¸ªè¡¨æœ‰å…³è”ï¼Œä¸å…è®¸å­¤è¡¨
- âœ… **æ‰€æœ‰10ä¸ªè¡¨éƒ½æœ‰å¤–é”®å…³è”**
- æ€»å…±12ä¸ªå¤–é”®çº¦æŸ
- æ¯ä¸ªè¡¨è‡³å°‘æœ‰1ä¸ªå¤–é”®å…³è”ï¼ˆå¼•ç”¨æˆ–è¢«å¼•ç”¨ï¼‰

## ğŸ” è¡¨å…³è”éªŒè¯

### æ— å­¤è¡¨éªŒè¯
```sql
-- æ‰€æœ‰è¡¨éƒ½æœ‰å¤–é”®å…³è”
1. sys_user: è¢«4ä¸ªè¡¨å¼•ç”¨ (operation_log, purchase_record, usage_record, warning)
2. additive_category: è¢«1ä¸ªè¡¨å¼•ç”¨ (food_additive), è‡ªå…³è” (parent_id)
3. food_additive: å¼•ç”¨1ä¸ªè¡¨ (additive_category), è¢«5ä¸ªè¡¨å¼•ç”¨
4. supplier: è¢«1ä¸ªè¡¨å¼•ç”¨ (purchase_record)
5. inventory: å¼•ç”¨1ä¸ªè¡¨ (food_additive), è¢«1ä¸ªè¡¨å¼•ç”¨ (warning)
6. purchase_record: å¼•ç”¨3ä¸ªè¡¨ (food_additive, supplier, sys_user)
7. usage_record: å¼•ç”¨2ä¸ªè¡¨ (food_additive, sys_user)
8. test_report: å¼•ç”¨1ä¸ªè¡¨ (food_additive)
9. warning: å¼•ç”¨3ä¸ªè¡¨ (food_additive, inventory, sys_user)
10. operation_log: å¼•ç”¨1ä¸ªè¡¨ (sys_user)
```

**ç»“è®ºï¼šâœ… æ‰€æœ‰è¡¨éƒ½æœ‰å…³è”ï¼Œæ— å­¤è¡¨ï¼**

## ğŸ“ é»˜è®¤è´¦å·ä¿¡æ¯

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | å§“å |
|--------|------|------|------|
| admin | 123456 | ADMIN | ç®¡ç†å‘˜ |
| user1 | 123456 | USER | å¼ ä¸‰ |
| user2 | 123456 | USER | æå›› |

**æ³¨æ„ï¼š** å¯†ç å·²ä½¿ç”¨BCryptåŠ å¯†å­˜å‚¨

## ğŸ¯ æ•°æ®åº“ç‰¹ç‚¹

1. **å®Œæ•´çš„å¤–é”®çº¦æŸ** - ä¿è¯æ•°æ®å®Œæ•´æ€§
2. **çº§è”æ“ä½œ** - è‡ªåŠ¨ç»´æŠ¤å…³è”æ•°æ®
3. **ç´¢å¼•ä¼˜åŒ–** - æé«˜æŸ¥è¯¢æ€§èƒ½
4. **æ—¶é—´æˆ³è‡ªåŠ¨æ›´æ–°** - create_time, update_time
5. **è½¯åˆ é™¤æ”¯æŒ** - statuså­—æ®µ
6. **ä¸°å¯Œçš„åˆå§‹æ•°æ®** - ä¾¿äºæµ‹è¯•

## ğŸš€ ä¸‹ä¸€æ­¥

æ•°æ®åº“å·²ç»å®Œå…¨å‡†å¤‡å¥½ï¼Œå¯ä»¥ï¼š
1. âœ… å¯åŠ¨åç«¯æœåŠ¡
2. âœ… æµ‹è¯•APIæ¥å£
3. âš ï¸ å¼€å‘å‰ç«¯é¡µé¢
4. âš ï¸ ç³»ç»Ÿæµ‹è¯•
5. âš ï¸ ç¼–å†™æŠ¥å‘Š

---

**æ•°æ®åº“åˆ›å»ºæ—¶é—´ï¼š** 2025-01-01  
**è„šæœ¬æ–‡ä»¶ï¼š** database/complete-schema.sql  
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆå¹¶éªŒè¯

