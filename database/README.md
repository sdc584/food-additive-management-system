# æ•°æ®åº“è„šæœ¬ä½¿ç”¨è¯´æ˜

## ğŸ“ æ–‡ä»¶åˆ—è¡¨

### 1. `complete-schema.sql` â­ ä¸»è„šæœ¬
**ç”¨é€”**ï¼šå®Œæ•´çš„æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼ŒåŒ…å«è¡¨ç»“æ„å’Œåˆå§‹æ•°æ®

**ä½¿ç”¨åœºæ™¯**ï¼š
- é¦–æ¬¡å®‰è£…ç³»ç»Ÿ
- é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
- å¼€å‘ç¯å¢ƒæ­å»º

**æ‰§è¡Œæ–¹æ³•**ï¼š
```bash
mysql -u root -p --default-character-set=utf8mb4 < database/complete-schema.sql
```

**âš ï¸ è­¦å‘Š**ï¼šæ­¤è„šæœ¬ä¼šåˆ é™¤å¹¶é‡æ–°åˆ›å»º `food_additive_system` æ•°æ®åº“ï¼Œè¯·è°¨æ…ä½¿ç”¨ï¼

**åŒ…å«å†…å®¹**ï¼š
- 10å¼ è¡¨çš„å®Œæ•´ç»“æ„å®šä¹‰
- 12ä¸ªå¤–é”®å…³è”å…³ç³»
- æ‰€æœ‰è¡¨çš„åˆå§‹æµ‹è¯•æ•°æ®
- ç”¨æˆ·ã€åˆ†ç±»ã€æ·»åŠ å‰‚ã€ä¾›åº”å•†ã€åº“å­˜ç­‰æ•°æ®

---

### 2. `fix-all-chinese-data.sql` ğŸ”§ ä¸­æ–‡ä¿®å¤è„šæœ¬
**ç”¨é€”**ï¼šä¿®å¤å·²å­˜åœ¨æ•°æ®åº“ä¸­çš„ä¸­æ–‡ä¹±ç é—®é¢˜

**ä½¿ç”¨åœºæ™¯**ï¼š
- æ•°æ®åº“ä¸­å‡ºç°ä¸­æ–‡ä¹±ç 
- å­—ç¬¦é›†é…ç½®é”™è¯¯å¯¼è‡´çš„æ˜¾ç¤ºé—®é¢˜

**æ‰§è¡Œæ–¹æ³•**ï¼š
```bash
mysql -u root -p --default-character-set=utf8mb4 < database/fix-all-chinese-data.sql
```

**ä¿®å¤å†…å®¹**ï¼š
- ç”¨æˆ·è¡¨çš„çœŸå®å§“å
- æ·»åŠ å‰‚åˆ†ç±»åç§°å’Œæè¿°
- é£Ÿå“æ·»åŠ å‰‚åç§°å’Œè¯´æ˜
- ä¾›åº”å•†ä¿¡æ¯
- åº“å­˜ä»“åº“ä½ç½®
- ä½¿ç”¨è®°å½•çš„ç”¨é€”å’Œéƒ¨é—¨
- æ£€æµ‹æŠ¥å‘Šçš„æœºæ„å’Œç»“æœ
- é¢„è­¦å†…å®¹
- æ“ä½œæ—¥å¿—

---

### 3. `fix-supplier-data.sql` ğŸ¢ ä¾›åº”å•†ä¿®å¤è„šæœ¬
**ç”¨é€”**ï¼šå•ç‹¬ä¿®å¤ä¾›åº”å•†è¡¨çš„æ•°æ®

**ä½¿ç”¨åœºæ™¯**ï¼š
- ä»…éœ€è¦æ›´æ–°ä¾›åº”å•†æ•°æ®
- ä¾›åº”å•†ä¿¡æ¯å‡ºç°ä¹±ç 

**æ‰§è¡Œæ–¹æ³•**ï¼š
```bash
mysql -u root -p --default-character-set=utf8mb4 < database/fix-supplier-data.sql
```

---

### 4. `SCHEMA_CHANGES.md` ğŸ“ å˜æ›´è®°å½•
**ç”¨é€”**ï¼šè®°å½•æ•°æ®åº“è„šæœ¬çš„ä¿®å¤å†å²å’Œå˜æ›´å†…å®¹

**åŒ…å«ä¿¡æ¯**ï¼š
- ä¿®å¤æ—¥æœŸå’Œå†…å®¹
- ä¿®å¤å‰åçš„æ•°æ®å¯¹æ¯”
- éªŒè¯ç»“æœ
- ä½¿ç”¨å»ºè®®

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡å®‰è£…
```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd food-additive-system

# 2. æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
mysql -u root -p --default-character-set=utf8mb4 < database/complete-schema.sql

# 3. è¾“å…¥MySQLå¯†ç 
# å¯†ç ï¼šsdc1534260.0

# 4. éªŒè¯å®‰è£…
mysql -u root -p -e "USE food_additive_system; SHOW TABLES;"
```

### ä¿®å¤ä¸­æ–‡ä¹±ç 
```bash
# æ‰§è¡Œä¸­æ–‡ä¿®å¤è„šæœ¬
mysql -u root -p --default-character-set=utf8mb4 < database/fix-all-chinese-data.sql
```

---

## ğŸ“Š æ•°æ®åº“ç»“æ„

### è¡¨åˆ—è¡¨ï¼ˆ10å¼ è¡¨ï¼‰

| è¡¨å | ä¸­æ–‡åç§° | è®°å½•æ•° | è¯´æ˜ |
|------|----------|--------|------|
| sys_user | ç³»ç»Ÿç”¨æˆ·è¡¨ | 3 | ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ· |
| additive_category | æ·»åŠ å‰‚åˆ†ç±»è¡¨ | 6 | é˜²è…å‰‚ã€æŠ—æ°§åŒ–å‰‚ç­‰åˆ†ç±» |
| food_additive | é£Ÿå“æ·»åŠ å‰‚è¡¨ | 7 | æ·»åŠ å‰‚è¯¦ç»†ä¿¡æ¯ |
| supplier | ä¾›åº”å•†è¡¨ | 3 | ä¾›åº”å•†åŸºæœ¬ä¿¡æ¯ |
| purchase_record | é‡‡è´­è®°å½•è¡¨ | 5 | é‡‡è´­å†å²è®°å½• |
| inventory | åº“å­˜è¡¨ | 7 | å½“å‰åº“å­˜ä¿¡æ¯ |
| usage_record | ä½¿ç”¨è®°å½•è¡¨ | 5 | æ·»åŠ å‰‚ä½¿ç”¨è®°å½• |
| test_report | æ£€æµ‹æŠ¥å‘Šè¡¨ | 3 | è´¨é‡æ£€æµ‹æŠ¥å‘Š |
| warning | é¢„è­¦è¡¨ | 2 | åº“å­˜é¢„è­¦ä¿¡æ¯ |
| operation_log | æ“ä½œæ—¥å¿—è¡¨ | 4 | ç³»ç»Ÿæ“ä½œæ—¥å¿— |

### å¤–é”®å…³ç³»ï¼ˆ12ä¸ªï¼‰

```
food_additive â†’ additive_category (åˆ†ç±»å…³è”)
purchase_record â†’ food_additive (æ·»åŠ å‰‚å…³è”)
purchase_record â†’ supplier (ä¾›åº”å•†å…³è”)
purchase_record â†’ sys_user (é‡‡è´­å‘˜å…³è”)
inventory â†’ food_additive (æ·»åŠ å‰‚å…³è”)
usage_record â†’ food_additive (æ·»åŠ å‰‚å…³è”)
usage_record â†’ sys_user (ä½¿ç”¨äººå…³è”)
test_report â†’ food_additive (æ·»åŠ å‰‚å…³è”)
warning â†’ food_additive (æ·»åŠ å‰‚å…³è”)
warning â†’ inventory (åº“å­˜å…³è”)
warning â†’ sys_user (å¤„ç†äººå…³è”)
operation_log â†’ sys_user (æ“ä½œäººå…³è”)
```

---

## ğŸ” é»˜è®¤è´¦å·

### ç®¡ç†å‘˜è´¦å·
- **ç”¨æˆ·å**ï¼šadmin
- **å¯†ç **ï¼š123456
- **è§’è‰²**ï¼šADMIN
- **é‚®ç®±**ï¼šadmin@example.com

### æ™®é€šç”¨æˆ·è´¦å·1
- **ç”¨æˆ·å**ï¼šuser1
- **å¯†ç **ï¼š123456
- **è§’è‰²**ï¼šUSER
- **çœŸå®å§“å**ï¼šå¼ ä¸‰

### æ™®é€šç”¨æˆ·è´¦å·2
- **ç”¨æˆ·å**ï¼šuser2
- **å¯†ç **ï¼š123456
- **è§’è‰²**ï¼šUSER
- **çœŸå®å§“å**ï¼šæå››

---

## âš™ï¸ å­—ç¬¦é›†é…ç½®

### æ•°æ®åº“å­—ç¬¦é›†
```sql
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
```

### è¡¨å­—ç¬¦é›†
æ‰€æœ‰è¡¨éƒ½ä½¿ç”¨ï¼š
```sql
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
```

### æ‰§è¡Œè„šæœ¬æ—¶çš„å­—ç¬¦é›†
åŠ¡å¿…ä½¿ç”¨ `--default-character-set=utf8mb4` å‚æ•°ï¼š
```bash
mysql -u root -p --default-character-set=utf8mb4 < script.sql
```

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### Q1: ä¸­æ–‡æ˜¾ç¤ºä¹±ç æ€ä¹ˆåŠï¼Ÿ
**A**: æ‰§è¡Œ `fix-all-chinese-data.sql` è„šæœ¬ä¿®å¤

### Q2: å¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ
**A**: é‡æ–°æ‰§è¡Œ `complete-schema.sql` è„šæœ¬

### Q3: å¦‚ä½•å¤‡ä»½æ•°æ®åº“ï¼Ÿ
**A**: 
```bash
mysqldump -u root -p --default-character-set=utf8mb4 food_additive_system > backup.sql
```

### Q4: å¦‚ä½•æ¢å¤å¤‡ä»½ï¼Ÿ
**A**: 
```bash
mysql -u root -p --default-character-set=utf8mb4 food_additive_system < backup.sql
```

### Q5: å¤–é”®çº¦æŸå¯¼è‡´åˆ é™¤å¤±è´¥ï¼Ÿ
**A**: 
```sql
SET FOREIGN_KEY_CHECKS = 0;
-- æ‰§è¡Œåˆ é™¤æ“ä½œ
SET FOREIGN_KEY_CHECKS = 1;
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. `SCHEMA_CHANGES.md` - å˜æ›´è®°å½•
2. é¡¹ç›®æ–‡æ¡£
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

## ğŸ“… æ›´æ–°æ—¥å¿—

### 2025-10-31
- âœ… ä¿®å¤ä¾›åº”å•†è¡¨æ•°æ®ï¼Œä½¿ç”¨æ›´å®Œæ•´çš„å…¬å¸åç§°
- âœ… æ·»åŠ ä¾›åº”å•†å¤‡æ³¨å­—æ®µ
- âœ… æ›´æ–°åº“å­˜æ•°é‡ï¼ˆID=1 ä» 80.00 æ”¹ä¸º 81.00ï¼‰
- âœ… ä¼˜åŒ–è„šæœ¬æ³¨é‡Šï¼Œæ·»åŠ ä½¿ç”¨è¯´æ˜
- âœ… éªŒè¯æ‰€æœ‰ä¸­æ–‡æ•°æ®æ˜¾ç¤ºæ­£å¸¸

### åˆå§‹ç‰ˆæœ¬
- âœ… åˆ›å»ºå®Œæ•´çš„æ•°æ®åº“ç»“æ„
- âœ… æ·»åŠ åˆå§‹æµ‹è¯•æ•°æ®
- âœ… é…ç½®å¤–é”®å…³è”å…³ç³»

