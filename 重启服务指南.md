# é£Ÿå“æ·»åŠ å‰‚ç®¡ç†ç³»ç»Ÿ - æœåŠ¡é‡å¯æŒ‡å—

**æ›´æ–°æ—¥æœŸï¼š** 2025-10-31  
**ç‰ˆæœ¬ï¼š** v1.0

---

## ğŸ”„ ä¸ºä»€ä¹ˆéœ€è¦é‡å¯æœåŠ¡ï¼Ÿ

åˆšåˆšæ·»åŠ äº†æ–°çš„åç«¯Controllerï¼ˆ`DashboardController.java`ï¼‰ï¼Œéœ€è¦é‡å¯åç«¯æœåŠ¡æ‰èƒ½åŠ è½½æ–°ä»£ç ã€‚

**æ–°å¢åŠŸèƒ½ï¼š**
- âœ… ç”¨æˆ·ç«¯é¦–é¡µç»Ÿè®¡æ•°æ®ä»æ•°æ®åº“çœŸå®è·å–
- âœ… æ–°å¢ `/api/user/dashboard/stats` æ¥å£

---

## ğŸ“‹ é‡å¯æ­¥éª¤

### æ–¹æ³•1ï¼šæ‰‹åŠ¨é‡å¯ï¼ˆæ¨èï¼‰

#### ç¬¬1æ­¥ï¼šåœæ­¢æ‰€æœ‰æœåŠ¡

åœ¨å„ä¸ªè¿è¡Œçª—å£ä¸­æŒ‰ `Ctrl + C` åœæ­¢æœåŠ¡ï¼š

1. **ç”¨æˆ·ç«¯åç«¯** (ç«¯å£ 8081) - æŒ‰ `Ctrl + C`
2. **ç®¡ç†ç«¯åç«¯** (ç«¯å£ 8082) - æŒ‰ `Ctrl + C`
3. **ç”¨æˆ·ç«¯å‰ç«¯** (ç«¯å£ 8080) - æŒ‰ `Ctrl + C`
4. **ç®¡ç†ç«¯å‰ç«¯** (ç«¯å£ 8083) - æŒ‰ `Ctrl + C`

#### ç¬¬2æ­¥ï¼šå¯åŠ¨æ‰€æœ‰æœåŠ¡

**ç»ˆç«¯1 - ç”¨æˆ·ç«¯åç«¯ (8081):**
```bash
cd food-additive-system/user-backend
mvn spring-boot:run
```

**ç»ˆç«¯2 - ç®¡ç†ç«¯åç«¯ (8082):**
```bash
cd food-additive-system/admin-backend
mvn spring-boot:run
```

**ç»ˆç«¯3 - ç”¨æˆ·ç«¯å‰ç«¯ (8080):**
```bash
cd food-additive-system/user-frontend
npm run serve
```

**ç»ˆç«¯4 - ç®¡ç†ç«¯å‰ç«¯ (8083):**
```bash
cd food-additive-system/admin-frontend
npm run serve
```

#### ç¬¬3æ­¥ï¼šç­‰å¾…æœåŠ¡å¯åŠ¨

- åç«¯æœåŠ¡ï¼šç­‰å¾…çœ‹åˆ° "Started Application in xxx seconds"
- å‰ç«¯æœåŠ¡ï¼šç­‰å¾…çœ‹åˆ° "App running at: http://localhost:xxxx"

#### ç¬¬4æ­¥ï¼šéªŒè¯æœåŠ¡

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- ç”¨æˆ·ç«¯ï¼šhttp://localhost:8080
- ç®¡ç†ç«¯ï¼šhttp://localhost:8083

---

### æ–¹æ³•2ï¼šä½¿ç”¨è„šæœ¬é‡å¯ï¼ˆWindowsï¼‰

åˆ›å»ºæ‰¹å¤„ç†æ–‡ä»¶ `restart-all.bat`ï¼š

```batch
@echo off
echo ========================================
echo é£Ÿå“æ·»åŠ å‰‚ç®¡ç†ç³»ç»Ÿ - é‡å¯æ‰€æœ‰æœåŠ¡
echo ========================================
echo.

echo [1/4] å¯åŠ¨ç”¨æˆ·ç«¯åç«¯ (8081)...
start "ç”¨æˆ·ç«¯åç«¯" cmd /k "cd food-additive-system\user-backend && mvn spring-boot:run"
timeout /t 5

echo [2/4] å¯åŠ¨ç®¡ç†ç«¯åç«¯ (8082)...
start "ç®¡ç†ç«¯åç«¯" cmd /k "cd food-additive-system\admin-backend && mvn spring-boot:run"
timeout /t 5

echo [3/4] å¯åŠ¨ç”¨æˆ·ç«¯å‰ç«¯ (8080)...
start "ç”¨æˆ·ç«¯å‰ç«¯" cmd /k "cd food-additive-system\user-frontend && npm run serve"
timeout /t 5

echo [4/4] å¯åŠ¨ç®¡ç†ç«¯å‰ç«¯ (8083)...
start "ç®¡ç†ç«¯å‰ç«¯" cmd /k "cd food-additive-system\admin-frontend && npm run serve"

echo.
echo ========================================
echo æ‰€æœ‰æœåŠ¡å¯åŠ¨å‘½ä»¤å·²æ‰§è¡Œï¼
echo è¯·ç­‰å¾…å„æœåŠ¡å¯åŠ¨å®Œæˆ...
echo ========================================
pause
```

---

## âœ… éªŒè¯æ–°åŠŸèƒ½

### 1. æµ‹è¯•ç»Ÿè®¡API

é‡å¯åç«¯åï¼Œæµ‹è¯•æ–°çš„ç»Ÿè®¡æ¥å£ï¼š

```bash
curl http://localhost:8081/api/user/dashboard/stats
```

**é¢„æœŸå“åº”ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "additiveCount": 7,
    "inventoryTotal": 1234.5,
    "warningCount": 3,
    "usageCount": 5
  }
}
```

### 2. æµ‹è¯•å‰ç«¯é¡µé¢

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080
2. ç™»å½•ç³»ç»Ÿï¼ˆadmin / 123456ï¼‰
3. æŸ¥çœ‹é¦–é¡µç»Ÿè®¡æ•°æ®
4. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
5. åˆ‡æ¢åˆ° Network æ ‡ç­¾
6. åˆ·æ–°é¡µé¢
7. æŸ¥çœ‹ `dashboard/stats` è¯·æ±‚
8. ç¡®è®¤è¿”å›çš„æ˜¯çœŸå®æ•°æ®

### 3. éªŒè¯æ•°æ®çœŸå®æ€§

**æ–¹æ³•1ï¼šæŸ¥çœ‹æ•°æ®åº“**
```sql
-- è¿æ¥æ•°æ®åº“
mysql -u root -psdc1534260.0

-- ä½¿ç”¨æ•°æ®åº“
USE food_additive_system;

-- æŸ¥çœ‹æ·»åŠ å‰‚æ•°é‡
SELECT COUNT(*) as additive_count FROM food_additive;

-- æŸ¥çœ‹åº“å­˜æ€»é‡
SELECT SUM(quantity) as inventory_total FROM inventory;

-- æŸ¥çœ‹é¢„è­¦æ•°é‡
SELECT COUNT(*) as warning_count FROM warning;

-- æŸ¥çœ‹æœ¬æœˆä½¿ç”¨è®°å½•æ•°é‡
SELECT COUNT(*) as usage_count 
FROM usage_record 
WHERE usage_date >= DATE_FORMAT(NOW(), '%Y-%m-01');
```

**æ–¹æ³•2ï¼šå¯¹æ¯”æ•°æ®**
- æ•°æ®åº“æŸ¥è¯¢ç»“æœ = é¦–é¡µæ˜¾ç¤ºæ•°æ® âœ…

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

**Windows:**
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :8081
netstat -ano | findstr :8082
netstat -ano | findstr :8080
netstat -ano | findstr :8083

# æ€æ­»è¿›ç¨‹ï¼ˆæ›¿æ¢ PID ä¸ºå®é™…è¿›ç¨‹IDï¼‰
taskkill /F /PID <PID>
```

### Q2: Mavenç¼–è¯‘å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

```bash
# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
cd food-additive-system/user-backend
mvn clean install

cd food-additive-system/admin-backend
mvn clean install
```

### Q3: npmå¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

```bash
# é‡æ–°å®‰è£…ä¾èµ–
cd food-additive-system/user-frontend
rm -rf node_modules package-lock.json
npm install

cd food-additive-system/admin-frontend
rm -rf node_modules package-lock.json
npm install
```

### Q4: æ•°æ®åº“è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼š
- `user-backend/src/main/resources/application.yml`
- `admin-backend/src/main/resources/application.yml`

ç¡®è®¤ï¼š
- MySQLæœåŠ¡å·²å¯åŠ¨
- æ•°æ®åº“åç§°ï¼šfood_additive_system
- ç”¨æˆ·åï¼šroot
- å¯†ç ï¼šsdc1534260.0

---

## ğŸ“Š æœåŠ¡çŠ¶æ€æ£€æŸ¥

### æ£€æŸ¥åç«¯æœåŠ¡

```bash
# ç”¨æˆ·ç«¯åç«¯
curl http://localhost:8081/api/user/dashboard/stats

# ç®¡ç†ç«¯åç«¯
curl http://localhost:8082/api/admin/foodAdditives
```

### æ£€æŸ¥å‰ç«¯æœåŠ¡

æµè§ˆå™¨è®¿é—®ï¼š
- http://localhost:8080 - ç”¨æˆ·ç«¯
- http://localhost:8083 - ç®¡ç†ç«¯

---

## ğŸ¯ é‡å¯åçš„æµ‹è¯•æ¸…å•

- [ ] ç”¨æˆ·ç«¯åç«¯å¯åŠ¨æˆåŠŸï¼ˆ8081ï¼‰
- [ ] ç®¡ç†ç«¯åç«¯å¯åŠ¨æˆåŠŸï¼ˆ8082ï¼‰
- [ ] ç”¨æˆ·ç«¯å‰ç«¯å¯åŠ¨æˆåŠŸï¼ˆ8080ï¼‰
- [ ] ç®¡ç†ç«¯å‰ç«¯å¯åŠ¨æˆåŠŸï¼ˆ8083ï¼‰
- [ ] ç»Ÿè®¡APIè¿”å›çœŸå®æ•°æ®
- [ ] é¦–é¡µæ˜¾ç¤ºçœŸå®ç»Ÿè®¡æ•°æ®
- [ ] æ•°æ®åº“æ•°æ®ä¸é¡µé¢æ˜¾ç¤ºä¸€è‡´
- [ ] æ— æ§åˆ¶å°é”™è¯¯
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

---

## ğŸ“ æœ¬æ¬¡æ›´æ–°å†…å®¹

### åç«¯æ–°å¢
- âœ… `DashboardController.java` - ç»Ÿè®¡æ•°æ®æ§åˆ¶å™¨
- âœ… `InventoryService.getTotalQuantity()` - è·å–åº“å­˜æ€»é‡
- âœ… `UsageRecordService.getCurrentMonthCount()` - è·å–å½“æœˆä½¿ç”¨è®°å½•æ•°

### å‰ç«¯æ–°å¢
- âœ… `dashboard.js` - ç»Ÿè®¡æ•°æ®APIæ¨¡å—
- âœ… `Home.vue` - ä¿®æ”¹ä¸ºä½¿ç”¨çœŸå®æ•°æ®

### æ•°æ®å˜åŒ–
- âŒ ç§»é™¤ç¡¬ç¼–ç æ¨¡æ‹Ÿæ•°æ®
- âœ… ä½¿ç”¨æ•°æ®åº“çœŸå®æ•°æ®

---

## ğŸš€ å¿«é€Ÿé‡å¯å‘½ä»¤

å¦‚æœä½ å·²ç»ç†Ÿæ‚‰æµç¨‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# ç»ˆç«¯1
cd food-additive-system/user-backend && mvn spring-boot:run

# ç»ˆç«¯2
cd food-additive-system/admin-backend && mvn spring-boot:run

# ç»ˆç«¯3
cd food-additive-system/user-frontend && npm run serve

# ç»ˆç«¯4
cd food-additive-system/admin-frontend && npm run serve
```

---

**æ–‡æ¡£ç¼–å†™ï¼š** ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°ï¼š** 2025-10-31  
**ç‰ˆæœ¬ï¼š** v1.0

